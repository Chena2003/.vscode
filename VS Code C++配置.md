# VS Code C++配置

## MSVC

`MSVC`是`Microsoft Visual stdio`中`C++`桌面开发中配套的编译工具。`vs code`可以使用`MSVC`作为编译`C++`的工具。

在下载`Microsoft Visual stdio`后， 打开`Developer Command Prompt for VS 2022`切换到项目文件夹，输入`code .`打开`vs code`，提供环境变量。

参考文档：[配置 Visual Studio Code 以进行Microsoft C++](https://code.visualstudio.com/docs/cpp/config-msvc)

文件配置：

`task.json`:

```json
{
    // 配置脱离Developer Command Prompt启动（失败）
      "windows": {
            "options": {
              "shell": {
                "executable": "cmd.exe",
                "args": [
                  "/C",
                  // The path to VsDevCmd.bat depends on the version of Visual Studio you have installed.
                  "\"C:/Program Files/Microsoft Visual Studio/2022/Community/Common7/Tools/VsDevCmd.bat\"",
                  "&&"
                ]
              }
            }
          },
      "tasks": [
            {
                  "type": "cppbuild",
                  "label": "C/C++: cl.exe build active file",
                  "command": "cl.exe",
                  "args": [
                        "/Zi",
                        "/EHsc",
                        "/nologo",
                        "/Fe${fileDirname}\\${fileBasenameNoExtension}.exe",
                        "${file}"
                  ],
                  "options": {
                        "cwd": "${fileDirname}"
                  },
                  "problemMatcher": [
                        "$msCompile"
                  ],
                  "group": {
                        "kind": "build",
                        "isDefault": true
                  },
                  "detail": "Task generated by Debugger."
            },
      ],
      "version": "2.0.0"
}
```

`launch.json`：

```json
{
      "configurations": [
            {
                  "name": "C/C++: cl.exe build and debug active file",
                  "type": "cppvsdbg",
                  "request": "launch",
                  "program": "${fileDirname}\\${fileBasenameNoExtension}.exe",
                  "args": [],
                  "stopAtEntry": true,
                  "cwd": "${fileDirname}",
                  "environment": [],
                  "console": "integratedTerminal",
                  "preLaunchTask": "C/C++: cl.exe build active file"
            }
      ],
      "version": "2.0.0"
}
```

`c_cpp_properties.json`:

```json
{
    "configurations": [
        {
            "name": "Win32",
            "includePath": [
                "${workspaceFolder}/**"
            ],
            "defines": [
                "_DEBUG",
                "UNICODE",
                "_UNICODE"
            ],
            "windowsSdkVersion": "10.0.22621.0",
            "compilerPath": "cl.exe",
            "cStandard": "c17",
            "cppStandard": "c++17",
            "intelliSenseMode": "windows-msvc-x64"
        }
    ],
    "version": 4
}
```

## MinGW

`GCC/G++`是`Linux`系统下`C/C++`编译工具。而`MinGW`就是在`Windows`平台下的`GCC/G++`（将`Linux`中`GCC/G++`移植到`Windows`平台下）。同样，`vs code`可以使用`MinGW`作为`C++`的编译工具。

下载`MinGW`，将相应的`bin`文件夹添加到环境变量中，即可。

参考文档：[Visual Studio Code 中的 C++ 和 MinGW-w64 入门](https://code.visualstudio.com/docs/cpp/config-mingw)

文件配置：

`task.json`：

```json\
{
      "tasks": [
            {
                  "type": "cppbuild",
                  "label": "C/C++: g++.exe build active file",
                  "command": "C:\\msys64\\ucrt64\\bin\\g++.exe",
                  "args": [
                        "-fdiagnostics-color=always",
                        "-g",
                        "${file}",
                        "-o",
                        "${fileDirname}\\${fileBasenameNoExtension}.exe"
                  ],
                  "options": {
                        "cwd": "C:\\msys64\\ucrt64\\bin"
                  },
                  "problemMatcher": [
                        "$gcc"
                  ],
                  "group": {
                        "kind": "build",
                        "isDefault": true
                  },
                  "detail": "Task generated by Debugger."
            }
      ],
      "version": "2.0.0"
}
```

`launch.json`：

```json
{
      "configurations": [
            {
                  "name": "C/C++: g++.exe build and debug active file",
                  "type": "cppdbg",
                  "request": "launch",
                  "program": "${fileDirname}\\${fileBasenameNoExtension}.exe",
                  "args": [],
                  "stopAtEntry": false,
                  "cwd": "C:\\msys64\\ucrt64\\bin",
                  "environment": [],
                  "externalConsole": false,
                  "MIMode": "gdb",
                  "miDebuggerPath": "C:\\msys64\\ucrt64\\bin\\gdb.exe",
                  "setupCommands": [
                        {
                              "description": "Enable pretty-printing for gdb",
                              "text": "-enable-pretty-printing",
                              "ignoreFailures": true
                        },
                        {
                              "description": "Set Disassembly Flavor to Intel",
                              "text": "-gdb-set disassembly-flavor intel",
                              "ignoreFailures": true
                        }
                  ],
                  "preLaunchTask": "C/C++: g++.exe build active file"
            }
      ],
      "version": "2.0.0"
}
```

`c_cpp_properties.json`：

```json
{
    "configurations": [
        {
            "name": "GCC",
            "includePath": [
                "${workspaceFolder}/**"
            ],
            "defines": [
                "_DEBUG",
                "UNICODE",
                "_UNICODE"
            ],
            "windowsSdkVersion": "10.0.22621.0",
            "cStandard": "c17",
            "cppStandard": "c++17",
            "intelliSenseMode": "windows-gcc-x64",
            "compilerPath": "\"C:\\msys64\\ucrt64\\bin\\g++.exe\""
        }
    ],
    "version": 4
}
```
